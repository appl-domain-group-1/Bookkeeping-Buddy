{% extends 'base.html' %}

{% block content %}
    <header style="color: white; font-size: xx-large; font-weight: bold;">
        <div class="dropdown">
  <button class="btn btn-secondary dropdown-toggle bg-transparent" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color: white; font-size: xx-large; font-weight: bold">
       {% block title %}
            View financial accounts
        {% endblock %}
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      {% for category in acct_categories %}
        <a class="dropdown-item" href="#myTable">{{ category['name'] }}</a>
       {% endfor %}
    <!--<a class="dropdown-item" href="#">Asset accounts</a>
    <a class="dropdown-item" href="#">Liability accounts</a>
      <a class="dropdown-item" href="#"> Owner's Equity Accounts</a>
      <a class="dropdown-item" href="#">Operating Revenue Accounts</a>
        <a class="dropdown-item" href="#">Operating Expense Accounts</a>-->
  </div>
</div>
    </header>
<br>
<input class="form-control" id="myInput" type="text" placeholder="Search..">

    {% for category in acct_categories %}
        <h2 class = "{{category['name']}}" style="color: white">{{ category['name'] }}</h2>
        <div class = "{{category['name']}}" style="overflow-x:auto; margin-top: -7px">
        <table id = "example" class = "table table-sm" style="height:110px; width:100%; border-bottom: 1px solid #F89E19">
            <thead class="thead-dark">
            <tr>
                <th>Number</th>
                <th>Name</th>
                <th>Description</th>
                <th>Type</th>
                <th>Balance</th>
                <th>Statement</th>
                <th>Comment</th>
                {% if g.user['role'] == 2 %}
                    <th>Account Actions</th>
                {% endif %}
            </tr>
            </thead>
            <tbody id="myTable">
            {% for account in accounts %}
                {% if account['acct_category'] == category['number'] %}

                    <tr>
                        <td>{{ account['acct_num'] }}</td>
                        <td><a href="{{ url_for("fin_accts.view_ledger", account_num=account['acct_num']) }}">{{ account['acct_name'] }}</a></td>
                        <td>{{ account['acct_desc'] }}</td>
                        {% if account['debit'] %}
                            <td>Debit</td>
                        {% else %}
                            <td>Credit</td>
                        {% endif %}
                        <td>{{ account['balance'] }}</td>
                        <td>{{ statements[account['statement']] }}</td>
                        <td>{{ account['comment'] }}</td>
                        {% if g.user['role'] == 2 %}
                            <td>
                                <div class="btn-group" role="group" aria-label="Basic example">
                                <button type="button" style="display: block; margin: auto" onclick="window.location.href='{{ url_for("fin_accts.edit_account", account_num=account['acct_num'] )}}'">Edit</button>
                                <button type="button" style="display: block; margin: auto" onclick="window.location.href='{{ url_for('fin_accts.deactivate_account', account_num=account['acct_num'])}}'">{% if account['active'] == 1 %}Deactivate{% else %}Activate{% endif %}</button>
                                </div>
                            </td>
                        {% endif %}
                    </tr>

                {% endif %}
            {% endfor %}
             </tbody>
        </table>
</div>
    {% endfor %}
    <br>
    <button type="button" style="display: block; border-color: #F89E19; margin: auto; padding: 10px; background-color: #185DFF; color: white; border-radius: 6px; width: 200px"  onclick="window.location.href='{{ url_for('fin_accts.view_logs')}}'">View Account Logs</button>
{% if g.user['role'] == 2 %}
    <button type="button" style="display: block; border-color: #F89E19; margin: auto; padding: 10px; background-color: #185DFF; color: white; border-radius: 6px; width: 200px"  onclick="window.location.href='{{ url_for('fin_accts.create_acct')}}'">Create New Account</button>
    <br>
{% endif %}
<script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>
{% endblock %}